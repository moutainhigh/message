<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhongan.icare.message.push.dao.SmsLogDAO">
	<resultMap id="BaseResultMap"
		type="com.zhongan.icare.message.push.dao.dataobject.SmsLogDO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="id" jdbcType="BIGINT" property="id" />
		<result column="template_no" jdbcType="VARCHAR" property="templateNo" />
		<result column="param" jdbcType="VARCHAR" property="param" />
		<result column="receiver_cust_id" jdbcType="BIGINT" property="receiverCustId" />
		<result column="receiver_phone" jdbcType="VARCHAR" property="receiverPhone" />
		<result column="result_code" jdbcType="VARCHAR" property="resultCode" />
		<result column="result_message" jdbcType="VARCHAR" property="resultMessage" />
		<result column="sende_time" jdbcType="TIMESTAMP" property="sendeTime" />
		<result column="send_type" jdbcType="TINYINT" property="sendType" />
		<result column="org_cust_id" jdbcType="BIGINT" property="orgCustId" />
		<result column="is_deleted" jdbcType="CHAR" property="isDeleted" />
		<result column="modifier" jdbcType="VARCHAR" property="modifier" />
		<result column="creator" jdbcType="VARCHAR" property="creator" />
		<result column="gmt_created" jdbcType="TIMESTAMP" property="gmtCreated" />
		<result column="gmt_modified" jdbcType="TIMESTAMP" property="gmtModified" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		id, template_no, param, receiver_cust_id, receiver_phone, result_code,
		result_message,
		sende_time, send_type, org_cust_id, is_deleted,
		modifier, creator, gmt_created,
		gmt_modified
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include refid="Base_Column_List" />
		from sms_log
		where id = #{id,jdbcType=BIGINT}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from sms_log
		where id = #{id,jdbcType=BIGINT}
	</delete>
	<insert id="insert"
		parameterType="com.zhongan.icare.message.push.dao.dataobject.SmsLogDO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into sms_log (id, template_no, param,
		receiver_cust_id,
		receiver_phone, result_code,
		result_message, sende_time, send_type,
		org_cust_id, is_deleted, modifier,
		creator, gmt_created, gmt_modified
		)
		values (#{id,jdbcType=BIGINT}, #{templateNo,jdbcType=VARCHAR},
		#{param,jdbcType=VARCHAR},
		#{receiverCustId,jdbcType=BIGINT},
		#{receiverPhone,jdbcType=VARCHAR}, #{resultCode,jdbcType=VARCHAR},
		#{resultMessage,jdbcType=VARCHAR}, #{sendeTime,jdbcType=TIMESTAMP},
		#{sendType,jdbcType=TINYINT},
		#{orgCustId,jdbcType=BIGINT},
		#{isDeleted,jdbcType=CHAR}, #{modifier,jdbcType=VARCHAR},
		#{creator,jdbcType=VARCHAR}, #{gmtCreated,jdbcType=TIMESTAMP},
		#{gmtModified,jdbcType=TIMESTAMP}
		)
	</insert>
	<insert id="insertSelective"
		parameterType="com.zhongan.icare.message.push.dao.dataobject.SmsLogDO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into sms_log
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="templateNo != null">
				template_no,
			</if>
			<if test="param != null">
				param,
			</if>
			<if test="receiverCustId != null">
				receiver_cust_id,
			</if>
			<if test="receiverPhone != null">
				receiver_phone,
			</if>
			<if test="resultCode != null">
				result_code,
			</if>
			<if test="resultMessage != null">
				result_message,
			</if>
			<if test="sendeTime != null">
				sende_time,
			</if>
			<if test="sendType != null">
				send_type,
			</if>
			<if test="orgCustId != null">
				org_cust_id,
			</if>
			<if test="isDeleted != null">
				is_deleted,
			</if>
			<if test="modifier != null">
				modifier,
			</if>
			<if test="creator != null">
				creator,
			</if>
			<if test="gmtCreated != null">
				gmt_created,
			</if>
			<if test="gmtModified != null">
				gmt_modified,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=BIGINT},
			</if>
			<if test="templateNo != null">
				#{templateNo,jdbcType=VARCHAR},
			</if>
			<if test="param != null">
				#{param,jdbcType=VARCHAR},
			</if>
			<if test="receiverCustId != null">
				#{receiverCustId,jdbcType=BIGINT},
			</if>
			<if test="receiverPhone != null">
				#{receiverPhone,jdbcType=VARCHAR},
			</if>
			<if test="resultCode != null">
				#{resultCode,jdbcType=VARCHAR},
			</if>
			<if test="resultMessage != null">
				#{resultMessage,jdbcType=VARCHAR},
			</if>
			<if test="sendeTime != null">
				#{sendeTime,jdbcType=TIMESTAMP},
			</if>
			<if test="sendType != null">
				#{sendType,jdbcType=TINYINT},
			</if>
			<if test="orgCustId != null">
				#{orgCustId,jdbcType=BIGINT},
			</if>
			<if test="isDeleted != null">
				#{isDeleted,jdbcType=CHAR},
			</if>
			<if test="modifier != null">
				#{modifier,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="gmtCreated != null">
				#{gmtCreated,jdbcType=TIMESTAMP},
			</if>
			<if test="gmtModified != null">
				#{gmtModified,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective"
		parameterType="com.zhongan.icare.message.push.dao.dataobject.SmsLogDO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update sms_log
		<set>
			<if test="templateNo != null">
				template_no = #{templateNo,jdbcType=VARCHAR},
			</if>
			<if test="param != null">
				param = #{param,jdbcType=VARCHAR},
			</if>
			<if test="receiverCustId != null">
				receiver_cust_id = #{receiverCustId,jdbcType=BIGINT},
			</if>
			<if test="receiverPhone != null">
				receiver_phone = #{receiverPhone,jdbcType=VARCHAR},
			</if>
			<if test="resultCode != null">
				result_code = #{resultCode,jdbcType=VARCHAR},
			</if>
			<if test="resultMessage != null">
				result_message = #{resultMessage,jdbcType=VARCHAR},
			</if>
			<if test="sendeTime != null">
				sende_time = #{sendeTime,jdbcType=TIMESTAMP},
			</if>
			<if test="sendType != null">
				send_type = #{sendType,jdbcType=TINYINT},
			</if>
			<if test="orgCustId != null">
				org_cust_id = #{orgCustId,jdbcType=BIGINT},
			</if>
			<if test="isDeleted != null">
				is_deleted = #{isDeleted,jdbcType=CHAR},
			</if>
			<if test="modifier != null">
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
			<if test="gmtModified != null">
				gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
			</if>
		</set>
		where id = #{id,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKey"
		parameterType="com.zhongan.icare.message.push.dao.dataobject.SmsLogDO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update sms_log
		set template_no = #{templateNo,jdbcType=VARCHAR},
		param =
		#{param,jdbcType=VARCHAR},
		receiver_cust_id =
		#{receiverCustId,jdbcType=BIGINT},
		receiver_phone =
		#{receiverPhone,jdbcType=VARCHAR},
		result_code =
		#{resultCode,jdbcType=VARCHAR},
		result_message =
		#{resultMessage,jdbcType=VARCHAR},
		sende_time =
		#{sendeTime,jdbcType=TIMESTAMP},
		send_type =
		#{sendType,jdbcType=TINYINT},
		org_cust_id =
		#{orgCustId,jdbcType=BIGINT},
		is_deleted = #{isDeleted,jdbcType=CHAR},
		modifier = #{modifier,jdbcType=VARCHAR},
		gmt_modified =
		#{gmtModified,jdbcType=TIMESTAMP}
		where id = #{id,jdbcType=BIGINT}
	</update>
	<sql id="BASE_COND_LIST">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<where>
			<if test="id != null">
				id = #{id,jdbcType=BIGINT}
			</if>
			<if test="templateNo != null">
				AND template_no = #{templateNo,jdbcType=VARCHAR}
			</if>
			<if test="param != null">
				AND param = #{param,jdbcType=VARCHAR}
			</if>
			<if test="receiverCustId != null">
				AND receiver_cust_id = #{receiverCustId,jdbcType=BIGINT}
			</if>
			<if test="receiverPhone != null">
				AND receiver_phone = #{receiverPhone,jdbcType=VARCHAR}
			</if>
			<if test="resultCode != null">
				AND result_code = #{resultCode,jdbcType=VARCHAR}
			</if>
			<if test="resultMessage != null">
				AND result_message = #{resultMessage,jdbcType=VARCHAR}
			</if>
			<if test="sendeTime != null">
				AND sende_time = #{sendeTime,jdbcType=TIMESTAMP}
			</if>
			<if test="sendType != null">
				AND send_type = #{sendType,jdbcType=TINYINT}
			</if>
			<if test="orgCustId != null">
				AND org_cust_id = #{orgCustId,jdbcType=BIGINT}
			</if>
			<if test="isDeleted != null">
				AND is_deleted = #{isDeleted,jdbcType=CHAR}
			</if>
			<if test="modifier != null">
				AND modifier = #{modifier,jdbcType=VARCHAR}
			</if>
			<if test="creator != null">
				AND creator = #{creator,jdbcType=VARCHAR}
			</if>
			<if test="gmtCreated != null">
				AND gmt_created = #{gmtCreated,jdbcType=TIMESTAMP}
			</if>
			<if test="gmtModified != null">
				AND gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}
			</if>
		</where>
	</sql>
	<select id="selectByCond"
		parameterType="com.zhongan.icare.message.push.dao.dataobject.SmsLogDO"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from sms_log
		<include refid="BASE_COND_LIST" />
	</select>
	<select id="selectByCondPage"
		parameterType="com.zhongan.icare.message.push.dao.dataobject.SmsLogPageDO"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from sms_log
		<include refid="BASE_COND_LIST" />
		order by id desc
		limit
		#{startRow,jdbcType=INTEGER},#{pageSize,jdbcType=INTEGER}
	</select>
	<select id="countByCond"
		parameterType="com.zhongan.icare.message.push.dao.dataobject.SmsLogDO"
		resultType="_int">
		select count(*) from sms_log
		<include refid="BASE_COND_LIST" />
	</select>

	<select id="selectNeedSendSmsLog" parameterType="com.zhongan.icare.message.push.dao.dataobject.SmsLogDO" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from sms_log
		WHERE 1=1 AND result_code is null AND is_deleted='N'
        <![CDATA[ AND (sende_time is null or sende_time <= now()) ]]>
	</select>

</mapper>